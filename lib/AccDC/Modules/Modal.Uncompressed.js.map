{"version":3,"sources":["../../../src/AccDC/Modules/Modal.Uncompressed.js"],"names":["$A","loadAccModalModule","extend","setModal","overrides","openModals","on","ev","length","dc","containsFocus","isFocusWithin","container","tabDirection","firstFocus","lastFocus","focus","id","genId","config","role","root","append","allowCascade","widgetType","exposeHiddenClose","displayHiddenClose","tabOut","isTouch","runDuring","query","setAttr","addClass","containerClassName","ariaAlertDialog","outerNode","ariaLabel","ariaDescribedBy","containerId","ariaDialog","exposeBounds","modalIndex","runAfter","push","runAfterClose","i","indexOf","splice","remAttr","o","runBeforeDestroy","off","reposition","callbackFn","autoFix","applyFix","autoPosition","setPosition","keyDown","k","which","keyCode","close","stopPropagation","preventDefault","shiftKey","click","onCreated"],"mappings":"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","sourcesContent":["/*!\r\nAccessible Modal Module 2.0 - Minimum requirement: AccDC4X V. 4.2018.0\r\nCopyright 2010-2018 Bryan Garaventa (WhatSock.com)\r\nRefactoring Contributions Copyright 2018 Danny Allen (dannya.com) / Wonderscore Ltd (wonderscore.co.uk)\r\nPart of AccDC, a Cross-Browser JavaScript accessibility API, distributed under the terms of the Open Source Initiative OSI - MIT License\r\n*/\r\n\r\nimport $A from \"../Core/API\";\r\n\r\nexport function loadAccModalModule() {\r\n  if (!(\"setModal\" in $A))\r\n    $A.extend({\r\n      setModal: function(overrides) {\r\n        if (!$A.setModal.openModals) $A.setModal.openModals = [];\r\n        $A.on(\"body\", \"focusin.AccDCModal\", function(ev) {\r\n          if ($A.setModal.openModals.length) {\r\n            var dc = $A.setModal.openModals[$A.setModal.openModals.length - 1];\r\n            var containsFocus = $A.isFocusWithin(dc.container);\r\n            if (!containsFocus) {\r\n              $A(dc.tabDirection ? dc.firstFocus : dc.lastFocus).focus();\r\n            }\r\n          }\r\n        });\r\n\r\n        overrides.overrides = overrides.overrides || {};\r\n        var id = overrides.overrides.id || overrides.id || $A.genId();\r\n\r\n        var config = {\r\n          id: id,\r\n          role: \"Dialog\",\r\n          root: \"body\",\r\n          append: true,\r\n          allowCascade: true,\r\n          widgetType: \"AccDCModal\",\r\n          exposeHiddenClose: true,\r\n          displayHiddenClose: true,\r\n          tabOut: function(ev, dc) {\r\n            if (!$A.isTouch()) {\r\n              return true;\r\n            }\r\n          },\r\n          runDuring: function(dc) {\r\n            $A.query(\"body > *\", function() {\r\n              $A.setAttr(this, \"aria-hidden\", \"true\");\r\n            });\r\n            $A.addClass(\r\n              dc.container,\r\n              overrides.containerClassName || \"container\"\r\n            );\r\n            if (overrides.ariaAlertDialog) {\r\n              $A.setAttr(dc.outerNode, {\r\n                role: \"alertdialog\",\r\n                \"aria-label\": overrides.ariaLabel || \"Modal\",\r\n                \"aria-describedby\": overrides.ariaDescribedBy || dc.containerId,\r\n                \"aria-modal\": \"true\"\r\n              });\r\n            } else if (overrides.ariaDialog) {\r\n              $A.setAttr(dc.outerNode, {\r\n                role: \"dialog\",\r\n                \"aria-label\": overrides.ariaLabel || \"Modal\",\r\n                \"aria-describedby\": overrides.ariaDescribedBy || dc.containerId,\r\n                \"aria-modal\": \"true\"\r\n              });\r\n            } else {\r\n              dc.exposeBounds = true;\r\n            }\r\n            dc.modalIndex = $A.setModal.openModals.length + 1;\r\n          },\r\n          runAfter: function(dc) {\r\n            $A.setModal.openModals.push(dc);\r\n            dc.firstFocus = $A.query('*[data-first=\"true\"]', dc.container)[0];\r\n            dc.lastFocus = $A.query('*[data-last=\"true\"]', dc.container)[0];\r\n            $A($A.query(\"*[data-focusfirst]\", dc.container)[0]).focus();\r\n          },\r\n          runAfterClose: function(dc) {\r\n            var i = $A.setModal.openModals.indexOf(dc);\r\n            $A.setModal.openModals.splice(i, 1);\r\n            if ($A.setModal.openModals.length) {\r\n              $A.setModal.openModals[$A.setModal.openModals.length - 1].remAttr(\r\n                \"aria-hidden\"\r\n              );\r\n            } else {\r\n              $A.query(\"body > *\", function(i, o) {\r\n                $A.remAttr(o, \"aria-hidden\");\r\n              });\r\n            }\r\n          },\r\n          runBeforeDestroy: function(dc) {\r\n            $A.off(\"body\", \".AccDCModal\");\r\n          },\r\n          reposition: function(callbackFn) {\r\n            if (!$A.setModal.openModals.length) {\r\n              return false;\r\n            }\r\n\r\n            if (\r\n              $A.setModal.openModals[$A.setModal.openModals.length - 1].autoFix\r\n            )\r\n              $A.setModal.openModals[\r\n                $A.setModal.openModals.length - 1\r\n              ].applyFix();\r\n            else if (\r\n              $A.setModal.openModals[$A.setModal.openModals.length - 1]\r\n                .autoPosition\r\n            )\r\n              $A.setModal.openModals[\r\n                $A.setModal.openModals.length - 1\r\n              ].setPosition();\r\n\r\n            // Run custom specified function?\r\n            if (typeof callbackFn === \"function\") {\r\n              callbackFn(\r\n                $A.setModal.openModals[$A.setModal.openModals.length - 1]\r\n              );\r\n            }\r\n\r\n            return true;\r\n          },\r\n          keyDown: function(ev, dc) {\r\n            var k = ev.which || ev.keyCode;\r\n\r\n            // If Escape is pressed, close the modal\r\n            if (k === 27) {\r\n              dc.close();\r\n              ev.stopPropagation();\r\n              ev.preventDefault();\r\n            }\r\n\r\n            // Track forward / reverse tab direction for looping\r\n            if (k === 9) {\r\n              dc.tabDirection = ev.shiftKey ? 0 : 1;\r\n            }\r\n          },\r\n          click: function(ev, dc) {},\r\n          onCreated: function(dc) {\r\n            id = dc.id;\r\n          }\r\n        };\r\n\r\n        $A.extend(config, overrides);\r\n\r\n        $A([config], overrides.overrides || {}, true);\r\n\r\n        // Return the new modal AccDC Object ID\r\n        return id;\r\n      }\r\n    });\r\n}\r\n\r\nexport default loadAccModalModule();\r\n"],"file":"Modal.Uncompressed.js"}