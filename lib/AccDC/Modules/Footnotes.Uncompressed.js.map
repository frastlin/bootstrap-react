{"version":3,"sources":["../../../src/AccDC/Modules/Footnotes.Uncompressed.js"],"names":["$A","loadAccFootnoteModule","extend","setFootnotes","overrides","base","genId","config","selector","context","document","fnChar","fnText","backText","pair","query","i","o","fnId","getAttr","fns","last","name","getText","targ","getEl","nodeType","parentNode","remove","data","a","createEl","id","href","title","insert","push","append","on","ev","inArray","fn","focus","stopPropagation","preventDefault","a2"],"mappings":"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","sourcesContent":["/*!\r\nAccessible Footnotes Module 3.0 - Minimum requirement: AccDC4X V. 4.2018.0\r\nCopyright 2010-2018 Bryan Garaventa (WhatSock.com)\r\nPart of AccDC, a Cross-Browser JavaScript accessibility API, distributed under the terms of the Open Source Initiative OSI - MIT License\r\n*/\r\n\r\nimport $A from \"../Core/API\";\r\n\r\nexport function loadAccFootnoteModule() {\r\n  if (!(\"setFootnotes\" in $A))\r\n    $A.extend({\r\n      setFootnotes: function(overrides) {\r\n        if (!$A.setFootnotes.base) {\r\n          $A.setFootnotes.base = $A.genId();\r\n          $A.setFootnotes[$A.setFootnotes.base] = {};\r\n          $A.setFootnotes[$A.setFootnotes.base + \"a\"] = {};\r\n        }\r\n\r\n        var base = $A.setFootnotes.base,\r\n          config = overrides || {},\r\n          selector = config.selector || \"\",\r\n          context = config.context || document,\r\n          fnChar = config.fnChar || \"&#8224;\",\r\n          fnText = config.fnText || \"Footnote\",\r\n          backText = config.backText || \"Back to Footnote\",\r\n          pair = {};\r\n\r\n        $A.query(selector, context, function(i, o) {\r\n          var fnId = $A.getAttr(o, \"data-footnote\");\r\n\r\n          if (!pair[fnId])\r\n            pair[fnId] = {\r\n              fns: [],\r\n              last: 0,\r\n              name: $A.getText(o),\r\n              targ: $A.getEl(fnId)\r\n            };\r\n\r\n          if (\r\n            $A.setFootnotes[base][base + fnId + i] &&\r\n            $A.setFootnotes[base][base + fnId + i].nodeType === 1 &&\r\n            $A.setFootnotes[base][base + fnId + i].parentNode\r\n          ) {\r\n            $A.remove($A.setFootnotes[base][base + fnId + i]);\r\n            delete $A.setFootnotes[base][base + fnId + i];\r\n            $A.data(o, \"BoundFootnote\", false);\r\n          }\r\n\r\n          if (\r\n            $A.setFootnotes[base + \"a\"][base + fnId + i] &&\r\n            $A.setFootnotes[base + \"a\"][base + fnId + i].nodeType === 1 &&\r\n            $A.setFootnotes[base + \"a\"][base + fnId + i].parentNode\r\n          ) {\r\n            $A.remove($A.setFootnotes[base + \"a\"][base + fnId + i]);\r\n            delete $A.setFootnotes[base + \"a\"][base + fnId + i];\r\n          }\r\n\r\n          if (!$A.data(o, \"BoundFootnote\")) {\r\n            $A.data(o, \"BoundFootnote\", true);\r\n\r\n            var a = $A.createEl(\"a\", {\r\n              id: base + fnId + i,\r\n              href: \"#\",\r\n              title: $A.getText(o),\r\n              \"aria-label\": fnText + (i + 1)\r\n            });\r\n            $A.insert('<sup aria-hidden=\"true\">[' + (i + 1) + \"]</sup>\", a);\r\n            $A.setFootnotes[base][base + fnId + i] = a;\r\n            pair[fnId].fns.push(a);\r\n            $A.append(a, o);\r\n\r\n            $A.on(a, \"click\", function(ev) {\r\n              pair[fnId].last = $A.inArray(this, pair[fnId].fns);\r\n              pair[fnId].fn.focus();\r\n              ev.stopPropagation();\r\n              ev.preventDefault();\r\n            });\r\n\r\n            if (!pair[fnId].fn) {\r\n              var a2 = $A.createEl(\"a\", {\r\n                href: \"#\",\r\n                title: backText + \" \" + pair[fnId].name,\r\n                \"aria-label\": backText + \" \" + pair[fnId].name\r\n              });\r\n              $A.insert('<span aria-hidden=\"true\">' + fnChar + \"</span>\", a2);\r\n              $A.setFootnotes[base + \"a\"][base + fnId + i] = a2;\r\n              pair[fnId].fn = a2;\r\n              $A.append(a2, pair[fnId].targ);\r\n\r\n              $A.on(a2, \"click\", function(ev) {\r\n                pair[fnId].fns[pair[fnId].last].focus();\r\n                ev.stopPropagation();\r\n                ev.preventDefault();\r\n              });\r\n            }\r\n          }\r\n        });\r\n      }\r\n    });\r\n}\r\n\r\nexport default loadAccFootnoteModule();\r\n"],"file":"Footnotes.Uncompressed.js"}