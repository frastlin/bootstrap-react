{"version":3,"sources":["../../../../src/react-wrapped-components/Combobox/ReadOnly/NativeReadOnlyCombobox.js"],"names":["React","zenscroll","strap","HiddenOptions","window","noZensmooth","$A","AccDC","NativeReadOnlyCombobox","Component","componentDidMount","myCombobox","setCombobox","input","select","overrides","role","className","middleClass","listboxClass","optionClass","activeClass","toggleClass","scrollIntoView","scrollIntoViewOverride","setAltTrigger","getEl","onTriggerChange","toggleObj","openState","src","setDefault","setAutoComplete","isTouch","setPromptText","setSize","device","type","onOpen","dc","onClose","start","optionNode","cbInstance","listboxNode","listboxNodeLast","myScroller","createScroller","center","render"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport zenscroll from \"zenscroll\";\r\nimport strap from \"../../../AccDC/DC\";\r\n\r\n/* Directions for Accessible Comboboxes\r\n\r\n1. Import AccDC/DC.\r\n\r\n2. Include a target edit field for use as a combobox field on the page, and ensure it has a unique ID plus a role=\"combobox\" attribute. Also specify if it is meant to be read-only or not by adding or omitting the readonly attribute. The HTML5 required attribute can also be added to enhance functionality as needed.\r\n\r\n3. Optionally add an image icon as a dropdown triggering element next to the edit field, make sure it has a unique ID attribute, ensure it includes a valid role and accessible label in accordance with the ARIA spec. This will be set during configuration using the myCombobox instance object after initialization. (View the Readonly Combobox for example.)\r\n\r\n4. Populate the native hidden select element that is used to configure the available dropdown options when using the combobox. To create a Multiselect combobox, add the 'multiple' attribute to the hidden select element. View the external ReadMe file for related instructions for using this feature.\r\n*/\r\n\r\nimport HiddenOptions from \"./Options\";\r\nwindow.noZensmooth = true;\r\n\r\nlet $A = window.AccDC;\r\n\r\nclass NativeReadOnlyCombobox extends React.Component {\r\n  componentDidMount() {\r\n    // ReadOnly behavior is automatically configured when the readonly attribute is added to the focusable input element with role=combobox.\r\n\r\n    this.myCombobox = strap.setCombobox(this, {\r\n      input: \"#ctry\", // CSS selector or DOM node\r\n      select: \"#countries\", // CSS selector or DOM node\r\n      overrides: {\r\n        role: \"Countries\",\r\n        className: \"top-container clearfix\",\r\n        middleClass: \"mid-container clearfix\",\r\n        listboxClass: \"listbox clearfix\",\r\n        optionClass: \"option clearfix\",\r\n        activeClass: \"active\",\r\n        toggleClass: \"pressed\"\r\n      }\r\n    });\r\n\r\n    // Normalize scrollIntoView functionality using a custom function.\r\n    this.myCombobox.scrollIntoView = this.scrollIntoViewOverride;\r\n\r\n    // Specify a dedicated toggle element for the Country ARIA Combobox\r\n    this.myCombobox.setAltTrigger($A.getEl(\"ctryIcon\"));\r\n\r\n    // Add logic to process each time the toggle element state changes\r\n    this.myCombobox.onTriggerChange(function(toggleObj, openState) {\r\n      // Do something\r\n      toggleObj.src = openState ? \"./img/up.svg\" : \"./img/down.svg\";\r\n    });\r\n\r\n    // Enable auto population of default value\r\n    // Reflects the selected option within the HiddenOptions select element\r\n    this.myCombobox.setDefault(true);\r\n\r\n    // Force the highlighted value to be automatically saved when focus moves away from the Combobox\r\n    this.myCombobox.setAutoComplete(true);\r\n\r\n    // Logic to distinguish between touch screen devices\r\n    if (!$A.isTouch()) {\r\n      // For desktops, add screen reader accessible keyboard instructions\r\n      this.myCombobox.setPromptText(\r\n        \"Press the down arrow to browse available matches\"\r\n      );\r\n      // Set a default list option display size for standard desktop screens\r\n      this.myCombobox.setSize(6);\r\n    } else {\r\n      // Otherwise, set a prompt for touch device users when using a screen reader like VoiceOver or TalkBack\r\n      this.myCombobox.setPromptText(\r\n        \"Activate toggle to scroll through available matches\"\r\n      );\r\n\r\n      // Set a default list option display size for touch screens, 3 for phones, 5 for tablets, 6 for others\r\n      if ($A.device.type === \"mobile\") this.myCombobox.setSize(3);\r\n      else if ($A.device.type === \"tablet\") this.myCombobox.setSize(5);\r\n      else this.myCombobox.setSize(6);\r\n    }\r\n\r\n    // Optionally process after the suggestion listbox window is opened\r\n    this.myCombobox.onOpen(function(dc) {\r\n      // Do something\r\n    });\r\n\r\n    // Process after the suggestion listbox window is closed\r\n    this.myCombobox.onClose(function(dc) {\r\n      // Do something\r\n    });\r\n\r\n    // Now activate the configured combobox instance\r\n    this.myCombobox.start();\r\n\r\n    /* AJAX updating of dynamically loaded suggest values is supported.\r\nSimply use a fetch request as shown within Help/$A by loading the desired options using JSON, XML, HTML, or text, then dynamically add or replace the newly loaded options within the hidden select element associated with this combobox.\r\nAfter all of the new options are loaded within the select element, call the myCombobox.update() method to rebuild the combobox.\r\nExample: this.myCombobox.update();\r\n*/\r\n  }\r\n  scrollIntoViewOverride(optionNode, cbInstance) {\r\n    // cbInstance.listboxNode is the parent role=\"listbox\" container element\r\n    if (cbInstance.listboxNode !== cbInstance.listboxNodeLast) {\r\n      // Only create a new myScroller instance when a new listbox is rendered.\r\n      cbInstance.listboxNodeLast = cbInstance.listboxNode;\r\n      cbInstance.myScroller = zenscroll.createScroller(\r\n        cbInstance.listboxNode,\r\n        200,\r\n        0\r\n      );\r\n    }\r\n    if (cbInstance.myScroller)\r\n      // optionNode is the newly highlighted role=\"option\" node for scrolling into view.\r\n      cbInstance.myScroller.center(optionNode);\r\n  }\r\n  render() {\r\n    return (\r\n      <p>\r\n        <label htmlFor=\"ctry\">Country:</label>\r\n        <input\r\n          role=\"combobox\"\r\n          aria-expanded=\"false\"\r\n          type=\"text\"\r\n          name=\"country-input-value\"\r\n          required\r\n          readOnly\r\n          id=\"ctry\"\r\n        />\r\n        <img\r\n          id=\"ctryIcon\"\r\n          title=\"Country selector\"\r\n          src=\"./img/down.svg\"\r\n          alt=\"Open available countries\"\r\n          ariaLabel=\"Open available countries\"\r\n          role=\"button\"\r\n        />\r\n        <HiddenOptions />\r\n      </p>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NativeReadOnlyCombobox;\r\n"],"file":"NativeReadOnlyCombobox.js"}