{"version":3,"sources":["../../../../src/react-wrapped-components/Combobox/Editable/NativeEditableCombobox.js"],"names":["React","zenscroll","strap","HiddenOptions","window","noZensmooth","$A","AccDC","NativeEditableCombobox","Component","componentDidMount","myCombobox","setCombobox","input","select","overrides","role","className","middleClass","listboxClass","optionClass","activeClass","toggleClass","scrollIntoView","scrollIntoViewOverride","setDefault","setAutoComplete","isTouch","setPromptText","setSize","device","type","onOpen","dc","onClose","start","optionNode","cbInstance","listboxNode","listboxNodeLast","myScroller","createScroller","center","render"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport zenscroll from \"zenscroll\";\r\nimport strap from \"../../../AccDC/DC\";\r\n\r\n/* Directions for Accessible Comboboxes\r\n\r\n1. Import AccDC/DC.\r\n\r\n2. Include a target edit field for use as a combobox field on the page, and ensure it has a unique ID plus a role=\"combobox\" attribute. Also specify if it is meant to be read-only or not by adding or omitting the readonly attribute. The HTML5 required attribute can also be added to enhance functionality as needed.\r\n\r\n3. Optionally add an image icon as a dropdown triggering element next to the edit field, make sure it has a unique ID attribute, ensure it includes a valid role and accessible label in accordance with the ARIA spec. This will be set during configuration using the myCombobox instance object after initialization. (View the Readonly Combobox for example.)\r\n\r\n4. Populate the native hidden select element that is used to configure the available dropdown options when using the combobox. To create a Multiselect combobox, add the 'multiple' attribute to the hidden select element. View the external ReadMe file for related instructions for using this feature.\r\n*/\r\n\r\nimport HiddenOptions from \"./Options\";\r\nwindow.noZensmooth = true;\r\n\r\nlet $A = window.AccDC;\r\n\r\nclass NativeEditableCombobox extends React.Component {\r\n  componentDidMount() {\r\n    this.myCombobox = strap.setCombobox(this, {\r\n      input: \"#stt\", // CSS selector or DOM node\r\n      select: \"#states\", // CSS selector or DOM node\r\n      overrides: {\r\n        role: \"States\",\r\n        className: \"top-container clearfix\",\r\n        middleClass: \"mid-container clearfix\",\r\n        listboxClass: \"listbox clearfix\",\r\n        optionClass: \"option clearfix\",\r\n        activeClass: \"active\",\r\n        toggleClass: \"pressed\"\r\n      }\r\n    });\r\n\r\n    // Normalize scrollIntoView functionality using a custom function.\r\n    this.myCombobox.scrollIntoView = this.scrollIntoViewOverride;\r\n\r\n    // Disable auto population of default value\r\n    this.myCombobox.setDefault(false);\r\n\r\n    // Force the highlighted value to be automatically saved when focus moves away from the Combobox\r\n    this.myCombobox.setAutoComplete(true);\r\n\r\n    // Logic to distinguish between touch screen devices\r\n    if (!$A.isTouch()) {\r\n      // For desktops, add screen reader accessible keyboard instructions\r\n      this.myCombobox.setPromptText(\r\n        \"First type then press the down arrow to browse available matches\"\r\n      );\r\n      // Set a default list option display size for standard desktop screens\r\n      this.myCombobox.setSize(6);\r\n    } else {\r\n      // Otherwise, set a prompt for touch device users when using a screen reader like VoiceOver or TalkBack\r\n      this.myCombobox.setPromptText(\r\n        \"First type then scroll through available matches\"\r\n      );\r\n\r\n      // Set a default list option display size for touch screens, 3 for phones, 5 for tablets, 6 for others\r\n      if ($A.device.type === \"mobile\") this.myCombobox.setSize(3);\r\n      else if ($A.device.type === \"tablet\") this.myCombobox.setSize(5);\r\n      else this.myCombobox.setSize(6);\r\n    }\r\n\r\n    // Optionally process after the suggestion listbox window is opened\r\n    this.myCombobox.onOpen(function(dc) {\r\n      // Do something\r\n    });\r\n\r\n    // Process after the suggestion listbox window is closed\r\n    this.myCombobox.onClose(function(dc) {\r\n      // Do something\r\n    });\r\n\r\n    // Now activate the configured combobox instance\r\n    this.myCombobox.start();\r\n\r\n    /* AJAX updating of dynamically loaded suggest values is supported.\r\nSimply use a fetch request as shown within src/index.js by loading the desired options using JSON, XML, HTML, or text, then dynamically add or replace the newly loaded options within the hidden select element associated with this combobox.\r\nAfter all of the new options are loaded within the select element, call the myCombobox.update() method to rebuild the combobox.\r\nExample: this.myCombobox.update();\r\n*/\r\n  }\r\n  scrollIntoViewOverride(optionNode, cbInstance) {\r\n    // cbInstance.listboxNode is the parent role=\"listbox\" container element\r\n    if (cbInstance.listboxNode !== cbInstance.listboxNodeLast) {\r\n      // Only create a new myScroller instance when a new listbox is rendered.\r\n      cbInstance.listboxNodeLast = cbInstance.listboxNode;\r\n      cbInstance.myScroller = zenscroll.createScroller(\r\n        cbInstance.listboxNode,\r\n        200,\r\n        0\r\n      );\r\n    }\r\n    if (cbInstance.myScroller)\r\n      // optionNode is the newly highlighted role=\"option\" node for scrolling into view.\r\n      cbInstance.myScroller.center(optionNode);\r\n  }\r\n  render() {\r\n    return (\r\n      <p>\r\n        <label htmlFor=\"stt\">State or province:</label>\r\n        <input\r\n          role=\"combobox\"\r\n          aria-expanded=\"false\"\r\n          type=\"text\"\r\n          name=\"state-input-value\"\r\n          required\r\n          id=\"stt\"\r\n        />\r\n        <HiddenOptions />\r\n      </p>\r\n    );\r\n  }\r\n}\r\n\r\nexport default NativeEditableCombobox;\r\n"],"file":"NativeEditableCombobox.js"}